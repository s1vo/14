<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>–ú—ã—à–∞ ‚ù§Ô∏è</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Fraunces:wght@400;600&family=Plus+Jakarta+Sans:wght@400;500;600&display=swap");

      :root {
        --bg-a: #ffb3c7;
        --bg-b: #ffd7e2;
        --bg-c: #cce9ff;
        --text: #1b1b1b;
        --muted: #5d5d5d;
        --bubble: #ffffff;
        --bubble-2: #fef1f5;
        --accent: #ff4f7b;
        --shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        --radius: 18px;
        --font: "Fraunces", "Times New Roman", serif;
        --font-ui: "Plus Jakarta Sans", "Arial", sans-serif;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
        margin: 0;
      }

      body {
        font-family: var(--font-ui);
        color: var(--text);
        background: radial-gradient(1200px 800px at 10% 10%, var(--bg-c), transparent 60%),
          radial-gradient(1200px 800px at 90% 20%, var(--bg-a), transparent 55%),
          linear-gradient(160deg, var(--bg-b), #fff 70%);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
        position: relative;
        overflow: hidden;
      }

      body::before,
      body::after {
        content: "";
        position: fixed;
        inset: -20%;
        z-index: 0;
        background: radial-gradient(600px 600px at 20% 20%, rgba(255, 79, 123, 0.18), transparent 60%),
          radial-gradient(700px 700px at 80% 30%, rgba(111, 179, 255, 0.2), transparent 60%),
          radial-gradient(700px 700px at 40% 80%, rgba(255, 198, 219, 0.22), transparent 60%);
        filter: blur(10px);
        animation: floatGlow 18s ease-in-out infinite alternate;
      }

      body::after {
        animation-duration: 24s;
        animation-delay: -6s;
        opacity: 0.7;
      }

      .stage {
        width: min(900px, 96vw);
        min-height: min(720px, 92vh);
        background: rgba(255, 255, 255, 0.72);
        backdrop-filter: blur(14px);
        border-radius: 18px;
        box-shadow: var(--shadow);
        overflow: hidden;
        position: relative;
        z-index: 1;
        display: flex;
        flex-direction: column;
      }

      .header {
        padding: 16px 22px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.9);
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      }

      .meta {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .title {
        font-family: var(--font);
        font-size: 16px;
        letter-spacing: 0.2px;
        font-weight: 400;
      }

      .date {
        font-size: 13px;
        color: var(--muted);
      }

      .from {
        font-family: var(--font);
        font-size: 28px;
        letter-spacing: 0.4px;
        font-weight: 400;
      }

      .heart-mini {
        color: var(--accent);
        display: inline-block;
        margin-left: 6px;
        animation: heartBeat 1.6s infinite ease-in-out;
        transform-origin: center;
      }

      .chat {
        padding: 22px 22px 12px;
        display: flex;
        flex-direction: column;
        gap: 14px;
        min-height: 420px;
        max-height: 68vh;
        overflow-y: auto;
        scroll-behavior: smooth;
        flex: 1;
      }

      .bubble {
        align-self: flex-start;
        max-width: 70%;
        background: var(--bubble);
        padding: 16px 18px;
        border-radius: var(--radius);
        box-shadow: 0 10px 22px rgba(0, 0, 0, 0.1);
        font-size: 16.5px;
        line-height: 1.35;
        position: relative;
        opacity: 0;
        transform: translateY(8px);
        animation: fadeIn 0.6s ease forwards;
      }

      .bubble.secondary {
        background: var(--bubble-2);
      }

      .bubble.big {
        font-size: 19px;
        font-family: var(--font);
        letter-spacing: 0.2px;
      }

      .typing {
        align-self: flex-start;
        background: rgba(255, 255, 255, 0.85);
        padding: 10px 14px;
        border-radius: 999px;
        display: inline-flex;
        gap: 6px;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
      }

      .dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: var(--accent);
        animation: dotPulse 1.4s infinite ease-in-out;
      }

      .dot:nth-child(2) {
        animation-delay: 0.2s;
      }

      .dot:nth-child(3) {
        animation-delay: 0.4s;
      }

      .actions {
        padding: 12px 22px 18px;
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }

      .btn {
        border: none;
        background: #1c1c1c;
        color: #fff;
        padding: 12px 18px;
        border-radius: 999px;
        cursor: pointer;
        font-size: 15px;
        letter-spacing: 0.3px;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .btn.primary {
        background: linear-gradient(135deg, #ff4f7b 0%, #ff7aa2 55%, #ffb0c8 100%);
        color: #fff;
        box-shadow: 0 10px 24px rgba(255, 79, 123, 0.35);
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      }

      .btn.secondary {
        background: #fff;
        color: #1c1c1c;
        border: 1px solid rgba(0, 0, 0, 0.12);
      }

      .overlay-dim {
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.12);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.5s ease;
      }

      .overlay-dim.active {
        opacity: 1;
      }

      .heart {
        position: absolute;
        right: 18px;
        bottom: 18px;
        font-size: 26px;
        opacity: 0;
        transform: scale(0.9);
        transition: opacity 0.6s ease, transform 0.6s ease;
      }

      .heart.active {
        opacity: 1;
        transform: scale(1);
        animation: heartBeat 1.6s infinite ease-in-out;
      }

      .message {
        white-space: pre-line;
      }

      @keyframes fadeIn {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes dotPulse {
        0%,
        80%,
        100% {
          transform: scale(0.6);
          opacity: 0.4;
        }
        40% {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes heartBeat {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.12);
        }
      }

      @keyframes floatGlow {
        0% {
          transform: translate3d(-2%, -2%, 0) scale(1);
        }
        50% {
          transform: translate3d(2%, 1%, 0) scale(1.03);
        }
        100% {
          transform: translate3d(-1%, 2%, 0) scale(1.01);
        }
      }

      @media (max-width: 700px) {
        body {
          padding: 12px;
        }
        .stage {
          width: 100%;
          min-height: 100vh;
          border-radius: 14px;
        }
        .chat {
          padding: 18px 18px 10px;
          max-height: none;
          min-height: 0;
        }
        .bubble {
          max-width: 92%;
          font-size: 15px;
        }
        .bubble.big {
          font-size: 17px;
        }
        .header {
          flex-direction: column;
          align-items: flex-start;
          gap: 6px;
        }
        .actions {
          padding: 10px 18px 16px;
          flex-direction: column;
          align-items: stretch;
          position: sticky;
          bottom: 0;
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(10px);
          border-top: 1px solid rgba(0, 0, 0, 0.06);
        }
        .btn {
          width: 100%;
        }
      }

      @media (max-width: 420px) {
        .stage {
          border-radius: 16px;
        }
        .title {
          font-size: 14px;
        }
        .chat {
          padding: 16px 16px 10px;
          max-height: none;
        }
        .btn {
          justify-content: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="stage">
      <div class="overlay-dim" id="overlay"></div>
      <div class="header">
        <div class="meta">
          <div class="from">–ú—ã—à–∞ <span class="heart-mini">‚ù§Ô∏è</span></div>
        </div>
      </div>
      <div class="chat" id="chat"></div>
      <div class="actions" id="actions"></div>
      <div class="heart" id="heart">‚ù§Ô∏è</div>
    </div>

    <audio id="ping" preload="auto">
      <source
        src="data:audio/wav;base64,UklGRkQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YSQAAAAA/////wD//wAA//8AAP//AAD//wAA"
        type="audio/wav"
      />
    </audio>

    <script>
      const chat = document.getElementById("chat");
      const actions = document.getElementById("actions");
      const overlay = document.getElementById("overlay");
      const heart = document.getElementById("heart");
      const ping = document.getElementById("ping");

      const messages = [
        { text: "–ü—Ä–∏–≤–µ—Ç üòä", delay: 500 },
        { text: "–Ø –¥–æ–ª–≥–æ –¥—É–º–∞–ª, –∫–∞–∫ —Ç–µ–±—è –ø–æ–∑–¥—Ä–∞–≤–∏—Ç—å —Å 14 —Ñ–µ–≤—Ä–∞–ª—è", delay: 1800 },
        { text: "–•–æ—Ç–µ–ª –Ω–∞–ø–∏—Å–∞—Ç—å —á—Ç–æ-—Ç–æ –æ–±—ã—á–Ω–æ–µ‚Ä¶\n–ù–æ –ø–æ–Ω—è–ª ‚Äî —ç—Ç–æ –≤–æ–æ–±—â–µ –Ω–µ –ø—Ä–æ —Ç–µ–±—è", delay: 1600 },
        { text: "–ü–æ—ç—Ç–æ–º—É —Ä–µ—à–∏–ª —Å–∫–∞–∑–∞—Ç—å —Ç–∞–∫, –∫–∞–∫ —á—É–≤—Å—Ç–≤—É—é", delay: 1600 },
        { text: "–¢—ã ‚Äî —á–µ–ª–æ–≤–µ–∫, —Ä—è–¥–æ–º —Å –∫–æ—Ç–æ—Ä—ã–º —Å–ø–æ–∫–æ–π–Ω–æ\n–î–∞–∂–µ –∫–æ–≥–¥–∞ –≤–æ–∫—Ä—É–≥ –ø–æ–ª–Ω—ã–π —Ö–∞–æ—Å", delay: 1700 },
        { text: "–° —Ç–æ–±–æ–π –ª—é–±–æ–π –¥–µ–Ω—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∞–∂–Ω—ã–º\n–î–∞–∂–µ —Å–∞–º—ã–π –æ–±—ã—á–Ω—ã–π", delay: 1600 },
        { text: "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è, –∫–∞–∫ —Ç—ã —Å–º–µ—ë—à—å—Å—è\n–ö–∞–∫ –∑–ª–∏—à—å—Å—è\n–ò –¥–∞–∂–µ –∫–∞–∫ –º–æ–ª—á–∏—à—å", delay: 1600 },
        { text: "–ò–Ω–æ–≥–¥–∞ —è –¥—É–º–∞—é:\n¬´–í–æ—Ç –±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –∏ –æ—Å—Ç–∞—Ç—å—Å—è –≤ –Ω—ë–º –ø–æ–¥–æ–ª—å—à–µ¬ª", delay: 1600 },
        { text: "–ï—Å–ª–∏ —á–µ—Å—Ç–Ω–æ‚Ä¶\n–Ø –æ—á–µ–Ω—å —Ä–∞–¥, —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç—ã –µ—Å—Ç—å –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏", delay: 1600 },
        {
          text: "–ò –º–Ω–µ —Å–æ–≤—Å–µ–º –Ω–µ –Ω—É–∂–µ–Ω –æ—Å–æ–±—ã–π –ø–æ–≤–æ–¥,\n—á—Ç–æ–±—ã —Å–∫–∞–∑–∞—Ç—å —ç—Ç–æ\n–ù–æ —Å–µ–≥–æ–¥–Ω—è ‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π –¥–µ–Ω—å ‚ù§Ô∏è",
          delay: 2000,
        },
        {
          text: "–ë—É–¥—å –º–æ–µ–π –í–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? üíå",
          delay: 3200,
          big: true,
          dim: true,
        },
      ];

      const afterAnswer = {
        text: "–Ø —É–∂–µ –∑–Ω–∞—é, —á—Ç–æ —Ç—ã —Å–∫–∞–∂–µ—à—å\n–ù–æ –≤—Å—ë —Ä–∞–≤–Ω–æ —Ö–æ—á—É —É—Å–ª—ã—à–∞—Ç—å —ç—Ç–æ –æ—Ç —Ç–µ–±—è üòâ",
      };

      const finalReply = {
        text: "–Ø —Ç–∞–∫ –∏ –∑–Ω–∞–ª.\n–° 14 —Ñ–µ–≤—Ä–∞–ª—è —Ç–µ–±—è, –ª—é–±–∏–º–∞—è ‚ù§Ô∏è",
      };

      const playfulNoReply = {
        text: "–û–π, –∫–Ω–æ–ø–∫–∞ ¬´–Ω–µ—Ç¬ª —Å–ª–æ–º–∞–ª–∞—Å—å. –î–∞–≤–∞–π –ø–æ–ø—Ä–æ–±—É–µ–º ¬´–¥–∞¬ª üòè",
      };

      const responseButtons = [
        { label: "–î–∞ ‚ù§Ô∏è", value: "yes" },
        { label: "–ö–æ–Ω–µ—á–Ω–æ –¥–∞ üòò", value: "yes" },
        { label: "–ù–µ—Ç üôà", value: "no" },
      ];

      let currentIndex = 0;

      function playPing() {
        ping.volume = 0.12;
        ping.currentTime = 0;
        ping.play().catch(() => {});
      }

      function scrollToBottom() {
        chat.scrollTop = chat.scrollHeight;
      }

      function showTyping() {
        const typing = document.createElement("div");
        typing.className = "typing";
        typing.innerHTML = '<span class="dot"></span><span class="dot"></span><span class="dot"></span>';
        chat.appendChild(typing);
        scrollToBottom();
        return typing;
      }

      function addBubble(text, options = {}) {
        const bubble = document.createElement("div");
        bubble.className = "bubble" + (options.secondary ? " secondary" : "") + (options.big ? " big" : "");
        const message = document.createElement("div");
        message.className = "message";
        bubble.appendChild(message);
        chat.appendChild(bubble);

        typeText(message, text, () => {
          if (options.dim) {
            overlay.classList.add("active");
            setTimeout(() => overlay.classList.remove("active"), 800);
          }
          if (options.heart) {
            heart.classList.add("active");
          }
          scrollToBottom();
          options.onComplete?.();
        });
        scrollToBottom();
      }

      function typeText(el, text, done) {
        const chars = [...text];
        let idx = 0;

        function step() {
          if (idx >= chars.length) {
            done();
            return;
          }
          el.textContent += chars[idx];
          idx += 1;
          scrollToBottom();
          setTimeout(step, 22);
        }
        step();
      }

      function showNextMessage() {
        if (currentIndex >= messages.length) {
          showAnswerButtons();
          return;
        }
        const item = messages[currentIndex];
        const typing = showTyping();
        setTimeout(() => {
          typing.remove();
          playPing();
          addBubble(item.text, {
            big: item.big,
            dim: item.dim,
            onComplete: () => {
              if (currentIndex === messages.length - 1) {
                heart.classList.add("active");
              }
              currentIndex += 1;
              setTimeout(showNextMessage, 200);
            },
          });
        }, item.delay);
      }

      function showAnswerButtons() {
        actions.innerHTML = "";
        const askBtn = document.createElement("button");
        askBtn.className = "btn primary";
        askBtn.textContent = "–û—Ç–≤–µ—Ç–∏—Ç—å üí¨";
        askBtn.addEventListener("click", () => {
          addBubble(afterAnswer.text, { secondary: true });
          actions.innerHTML = "";
            responseButtons.forEach((btn, index) => {
              const el = document.createElement("button");
              el.className = index === 0 ? "btn primary" : "btn";
              el.textContent = btn.label;
            el.addEventListener("click", () => {
              actions.innerHTML = "";
              if (btn.value === "no") {
                addBubble(playfulNoReply.text, { secondary: true });
                setTimeout(showAnswerButtons, 700);
                return;
              }
              addBubble(finalReply.text, { heart: true, secondary: true });
            });
            actions.appendChild(el);
          });
        });
        actions.appendChild(askBtn);
      }

      showNextMessage();
    </script>
  </body>
</html>
